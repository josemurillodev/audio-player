var y=Object.defineProperty;var g=(n,e,t)=>e in n?y(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var r=(n,e,t)=>g(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();class m{constructor(e){r(this,"context");r(this,"buffer",null);r(this,"sourceNode",null);r(this,"playing",!1);r(this,"time",0);r(this,"offset",0);r(this,"load",async e=>{this.stop();try{const t=await this.context.decodeAudioData(e);return this.buffer=t,this.buffer}catch(t){throw this.buffer=null,t}});r(this,"createSource",()=>{this.sourceNode=this.context.createBufferSource(),this.sourceNode.connect(this.context.destination),this.sourceNode.buffer=this.buffer,this.sourceNode.onended=()=>this.stop()});r(this,"destroySource",()=>{this.sourceNode&&(this.sourceNode.onended=()=>{},this.sourceNode.stop(this.context.currentTime),this.sourceNode.disconnect(),this.sourceNode=null)});r(this,"calculateElapsed",()=>{const e=this.context.currentTime;this.time+=e-this.offset,this.offset=e});r(this,"play",()=>{if(this.playing||!this.buffer)return;const e=this.context.currentTime;this.offset=e,this.createSource();const t=this.buffer.duration-this.time;this.sourceNode.start(e,this.time,t),this.playing=!0});r(this,"pause",()=>{!this.playing||!this.buffer||(this.destroySource(),this.calculateElapsed(),this.playing=!1)});r(this,"stop",()=>{this.pause(),this.seek(0)});r(this,"seek",e=>{const t=this.playing;t&&this.pause(),this.time=Math.max(0,e),t&&this.play()});this.context=e}static formatTime(e){const t=Math.floor(e%3600/60),a=Math.floor(e%60),s=String(a).padStart(2,"0");return`${t}:${s}`}get isPlaying(){return this.playing}get duration(){var e;return((e=this.buffer)==null?void 0:e.duration)||0}get elapsed(){return this.playing&&this.calculateElapsed(),this.time}}const b=new AudioContext,o=new m(b),d=document.createElement("input");d.type="file";d.accept="audio/*";d.style.marginBottom="24px";document.body.appendChild(d);d.addEventListener("change",n=>{var t;const e=(t=n.target.files)==null?void 0:t[0];if(e){const a=new FileReader;a.onload=()=>{const s=a.result;o.load(s),u.classList.remove("playing")},a.onerror=()=>console.error("Error reading file"),a.readAsArrayBuffer(e)}});const f=document.createElement("div");f.className="audio-player";document.body.appendChild(f);const u=document.createElement("button");u.className="play-button";f.appendChild(u);const N=document.createElement("span");u.appendChild(N);const p=document.createElement("span");p.className="time";p.textContent="0:00 / 0:00";f.appendChild(p);u.addEventListener("click",()=>{if(o.duration){if(o.isPlaying){o.pause(),u.classList.remove("playing");return}o.play(),u.classList.add("playing")}});const c=document.createElement("input");c.style.width="80%";c.type="range";c.min="0";c.max="0.999";c.step="0.001";c.value="0";f.appendChild(c);let l=null;c.addEventListener("input",n=>{l!==null&&clearTimeout(l);const e=n.target,t=parseFloat(e.value)*o.duration;l=setTimeout(()=>{o.seek(t),l=null},100)});const x=()=>{if(!o.duration||l!==null)return;const n=m.formatTime(o.elapsed),e=m.formatTime(o.duration);p.textContent=`${n} / ${e}`;const t=o.elapsed/o.duration;c.value=t.toString()};setInterval(()=>{x()},100);
